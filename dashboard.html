<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Meu Dashboard â€“ CodePlay</title>
<link rel="stylesheet" href="styles/main.css"/>
<link rel="stylesheet" href="styles/components.css"/>
<link rel="stylesheet" href="styles/dashboard.css"/>
<script>
// Nav Auth Guard â€” runs before render to avoid flash
(function(){
  function isLoggedIn(){
    try{ var u=JSON.parse(localStorage.getItem('cp_currentUser')||'null'); return !!(u&&(u.username||u.name)); }catch{return false;}
  }
  var loggedIn = isLoggedIn();
  if(!loggedIn){
    var s=document.createElement('style');
    s.id='nav-guard-style';
    s.textContent='.nav__link:not([href="index.html"]):not(.nav__guard-login){display:none!important;}.nav__guard-login{display:inline-flex!important;}';
    document.head.appendChild(s);
  }
  // expose for other scripts
  window._cpLoggedIn = loggedIn;
})();
</script>
<script>
(function(){
  function isLoggedIn(){
    try{ var u=JSON.parse(localStorage.getItem('cp_currentUser')||'null'); return !!(u&&(u.username||u.name)); }catch{return false;}
  }
  if(!isLoggedIn()){ window.location.replace('account.html'); }
})();
</script>
</head>
<body>
<header class="header" id="header">
  <div class="container header__inner">
    <a href="index.html" class="logo"><span class="logo__icon">âš¡</span><span class="logo__text">CodePlay</span></a>
    <nav class="nav" id="nav">
      <a href="index.html" class="nav__link">Home</a>
      <a href="playground.html" class="nav__link">Playground</a>
      <a href="store.html" class="nav__link">Loja</a>
      <a href="community.html" class="nav__link">Comunidade</a>
      <a href="database.html" class="nav__link">Banco de Dados</a>
      <a href="hacker.html" class="nav__link">Hacker</a>
      <a href="simuladores.html" class="nav__link">Simuladores</a>
      <a href="missions.html" class="nav__link">MissÃµes</a>
      <a href="dashboard.html" class="nav__link active">Dashboard</a>
      <a href="chat.html" class="nav__link">Chat</a>
      <a href="account.html" class="nav__link">Conta</a>
    </nav>
    <a href="playground.html" class="btn btn--primary">Start Creating Now</a>
    <button class="hamburger" id="hamburger">â˜°</button>
  </div>
</header>

<main class="page-main container" id="mainContent">

  <!-- NOT LOGGED IN -->
  <div id="notLogged" class="not-logged hidden">
    <div class="not-logged__inner">
      <div style="font-size:4rem">ğŸ”</div>
      <h2>FaÃ§a login para ver seu Dashboard</h2>
      <p>Seu Dashboard pessoal mostra seus apps, ferramentas, saldo e missÃµes concluÃ­das â€” sincronizado em qualquer dispositivo.</p>
      <a href="account.html" class="btn btn--primary btn--lg">Criar conta / Entrar â†’</a>
    </div>
  </div>

  <!-- LOGGED IN -->
  <div id="dashContent" class="hidden">

    <!-- Hero profile bar -->
    <div class="dash-hero">
      <div class="dash-hero__avatar" id="dAvatar">ğŸ‘¤</div>
      <div class="dash-hero__info">
        <h1 id="dUsername">Jogador</h1>
        <p id="dEmail" class="text-muted"></p>
        <p class="dash-since">Membro desde <span id="dSince"></span></p>
      </div>
      <div class="dash-stats">
        <div class="dash-stat">
          <span id="dWallet" class="dash-stat__val text-gold">R$ 0</span>
          <small>Carteira</small>
        </div>
        <div class="dash-stat">
          <span id="dLevel" class="dash-stat__val text-purple">NÃ­vel 1</span>
          <small>NÃ­vel</small>
        </div>
        <div class="dash-stat">
          <span id="dXP" class="dash-stat__val text-blue">0 XP</span>
          <small>ExperiÃªncia</small>
        </div>
        <div class="dash-stat">
          <span id="dAppsCount" class="dash-stat__val">0</span>
          <small>Apps</small>
        </div>
        <div class="dash-stat">
          <span id="dToolsCount" class="dash-stat__val">0</span>
          <small>Ferramentas</small>
        </div>
        <div class="dash-stat">
          <span id="dMissionsCount" class="dash-stat__val text-gold">0</span>
          <small>MissÃµes âœ…</small>
        </div>
      </div>
      <button class="btn btn--sm btn--danger-outline" id="btnLogout">Sair</button>
    </div>

    <!-- XP Bar -->
    <div class="xp-section" style="margin-bottom:2rem">
      <div class="xp-header"><span>ğŸŒŸ Progresso</span><span id="dXPProgress"></span></div>
      <div class="xp-track"><div class="xp-fill" id="dXPFill" style="width:0%"></div></div>
    </div>

    <!-- Quick actions -->
    <div class="dash-quick-actions">
      <a href="playground.html" class="quick-action">
        <span>âš¡</span><strong>Playground</strong><small>Criar apps</small>
      </a>
      <a href="missions.html" class="quick-action">
        <span>ğŸ¯</span><strong>MissÃµes</strong><small>Ganhar XP</small>
      </a>
      <a href="store.html" class="quick-action">
        <span>ğŸ›’</span><strong>Loja</strong><small>Comprar apps</small>
      </a>
      <a href="hacker.html" class="quick-action">
        <span>â˜ ï¸</span><strong>Hacker Lab</strong><small>Ferramentas</small>
      </a>
      <a href="simuladores.html" class="quick-action">
        <span>ğŸ›ï¸</span><strong>Simuladores</strong><small>Executar</small>
      </a>
    </div>

    <!-- My Apps -->
    <div class="dash-section">
      <div class="dash-section__head">
        <h2>ğŸ“± Meus Apps <span class="badge-count" id="appsBadge">0</span></h2>
        <a href="playground.html" class="btn btn--sm btn--primary">+ Criar App</a>
      </div>
      <div id="dashAppsGrid" class="dash-apps-grid"></div>
      <p class="empty-hint hidden" id="dashAppsEmpty">Nenhum app criado ainda. <a href="playground.html">Criar agora â†’</a></p>
    </div>

    <!-- My Hack Tools -->
    <div class="dash-section">
      <div class="dash-section__head">
        <h2>â˜ ï¸ Ferramentas Hacker <span class="badge-count" id="toolsBadge">0</span></h2>
        <a href="hacker.html" class="btn btn--sm" style="background:#ef444420;border:1px solid #ef444440;color:#ef4444">+ Criar Ferramenta</a>
      </div>
      <div id="dashToolsGrid" class="dash-tools-grid"></div>
      <p class="empty-hint hidden" id="dashToolsEmpty">Nenhuma ferramenta ainda. <a href="hacker.html">Hacker Lab â†’</a></p>
    </div>

    <!-- Purchased apps -->
    <div class="dash-section">
      <div class="dash-section__head">
        <h2>ğŸ›’ Apps Comprados <span class="badge-count" id="purchBadge">0</span></h2>
        <a href="store.html" class="btn btn--sm">Ir Ã  Loja â†’</a>
      </div>
      <div id="dashPurchGrid" class="dash-apps-grid"></div>
      <p class="empty-hint hidden" id="dashPurchEmpty">Nenhuma compra ainda.</p>
    </div>

    <!-- Mission log -->
    <div class="dash-section">
      <div class="dash-section__head">
        <h2>ğŸ† HistÃ³rico de MissÃµes <span class="badge-count" id="missBadge">0</span></h2>
        <a href="missions.html" class="btn btn--sm">Ver MissÃµes â†’</a>
      </div>
      <div id="dashMissLog" class="missions-log-mini"></div>
      <p class="empty-hint hidden" id="dashMissEmpty">Nenhuma missÃ£o concluÃ­da.</p>
    </div>

  </div>
</main>

<footer class="footer"><div class="footer__bottom"><p>Â© 2026 CodePlay.</p></div></footer>
<script src="js/api.js"></script>
<script src="js/dashboard.js"></script>
<script src="js/main.js"></script>
</body></html>